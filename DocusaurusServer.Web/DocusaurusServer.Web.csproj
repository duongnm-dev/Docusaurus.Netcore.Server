<Project Sdk="Microsoft.NET.Sdk.Web">
	<PropertyGroup>
		<TargetFramework>net9.0</TargetFramework>
		<Nullable>enable</Nullable>
		<ImplicitUsings>enable</ImplicitUsings>
	</PropertyGroup>
	<Target Name="BuildDocusaurus" AfterTargets="Build">
		<!-- Chỉ cài npm khi chưa có -->
		<Exec WorkingDirectory="..\DocusaurusApp" Command="npm install" Condition="!Exists('..\DocusaurusApp\node_modules')" />
		<!-- Build Docusaurus -->
		<Exec WorkingDirectory="..\DocusaurusApp" Command="npm run build" />
		<!-- Copy output sang wwwroot -->
		<RemoveDir Directories="wwwroot" />
		<MakeDir Directories="wwwroot" />
		<ItemGroup>
			<DocusaurusBuildFiles Include="..\DocusaurusApp\build\**\*" />
		</ItemGroup>
		<Copy SourceFiles="@(DocusaurusBuildFiles)" DestinationFolder="wwwroot\%(RecursiveDir)" SkipUnchangedFiles="true" />
	</Target>
</Project>